---
title: Expériences Machine Learning Studio (classique)
description: Utilisez des modèles Machine Learning Studio (classique) dans Dynamics 365 Customer Insights.
ms.date: 12/03/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: tutorial
author: m-hartmann
ms.author: ameetj
ms.reviewer: mhart
manager: shellyha
ms.openlocfilehash: 71881f7e1f9448fe0a7d6d92b8102b8b42de7c2a
ms.sourcegitcommit: bae40184312ab27b95c140a044875c2daea37951
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 03/15/2021
ms.locfileid: "5598336"
---
# <a name="use-models-based-on-azure-machine-learning-studio-classic"></a><span data-ttu-id="8bc10-103">Utiliser des modèles basés sur Azure Machine Learning Studio (classique)</span><span class="sxs-lookup"><span data-stu-id="8bc10-103">Use models based on Azure Machine Learning Studio (classic)</span></span>

<span data-ttu-id="8bc10-104">Les données unifiées dans Dynamics 365 Customer Insights sont une source pour créer des modèles Machine Learning qui peuvent générer des informations métier supplémentaires.</span><span class="sxs-lookup"><span data-stu-id="8bc10-104">The unified data in Dynamics 365 Customer Insights is a source for building machine learning models that can generate additional business insights.</span></span> <span data-ttu-id="8bc10-105">Customer Insights s’intègre à Machine Learning Studio (classique) pour utiliser vos propres modèles personnalisés.</span><span class="sxs-lookup"><span data-stu-id="8bc10-105">Customer Insights integrates with Machine Learning Studio (classic) to use your own custom models.</span></span> <span data-ttu-id="8bc10-106">Pour voir comment les modèles développés dans Azure Machine Learning sont intégrés à Customer Insights, consultez [Expériences Azure Machine Learning](azure-machine-learning-experiments.md).</span><span class="sxs-lookup"><span data-stu-id="8bc10-106">To see how models developed in Azure Machine Learning are integrated with Customer Insights, see [Azure Machine Learning experiments](azure-machine-learning-experiments.md).</span></span>

## <a name="prerequisites"></a><span data-ttu-id="8bc10-107">Conditions préalables</span><span class="sxs-lookup"><span data-stu-id="8bc10-107">Prerequisites</span></span>

- <span data-ttu-id="8bc10-108">Accéder à Customer Insights</span><span class="sxs-lookup"><span data-stu-id="8bc10-108">Access to Customer Insights</span></span>
- <span data-ttu-id="8bc10-109">Activer l’abonnement Azure Enterprise</span><span class="sxs-lookup"><span data-stu-id="8bc10-109">Active Azure Enterprise subscription</span></span>
- [<span data-ttu-id="8bc10-110">Profils client unifiés</span><span class="sxs-lookup"><span data-stu-id="8bc10-110">Unified customer profiles</span></span>](data-unification.md)
- <span data-ttu-id="8bc10-111">Configuration de l’[Exportation d’entité vers le stockage Blob Azure](export-azure-blob-storage.md)</span><span class="sxs-lookup"><span data-stu-id="8bc10-111">[Entity export to Azure Blob storage](export-azure-blob-storage.md) set up</span></span>

## <a name="set-up-machine-learning-studio-classic"></a><span data-ttu-id="8bc10-112">Configurer Machine Learning Studio (classique)</span><span class="sxs-lookup"><span data-stu-id="8bc10-112">Set up Machine Learning Studio Classic</span></span>

<span data-ttu-id="8bc10-113">Tout d’abord, nous devons créer un espace de travail et ouvrir Machine Learning Studio (classique).</span><span class="sxs-lookup"><span data-stu-id="8bc10-113">In a first step, we need to create a workspace for and open the Machine Learning Studio (classic).</span></span>

1. <span data-ttu-id="8bc10-114">Accédez à [https://www.portal.azure.com](https://www.portal.azure.com/) et connectez-vous.</span><span class="sxs-lookup"><span data-stu-id="8bc10-114">Go to [https://www.portal.azure.com](https://www.portal.azure.com/) and sign in.</span></span>

1. <span data-ttu-id="8bc10-115">Sélectionnez **Créer une ressource**.</span><span class="sxs-lookup"><span data-stu-id="8bc10-115">Select **Create a resource**.</span></span>

1. <span data-ttu-id="8bc10-116">Cherchez **Espace de travail Machine Learning Studio** et sélectionnez **Créer**.</span><span class="sxs-lookup"><span data-stu-id="8bc10-116">Search **Machine Learning Studio Workspace** and select **Create**.</span></span>

1. <span data-ttu-id="8bc10-117">Entrez les détails requis pour [créer l’espace de travail](/azure/machine-learning/studio/create-workspace).</span><span class="sxs-lookup"><span data-stu-id="8bc10-117">Enter the required details to [create the workspace](/azure/machine-learning/studio/create-workspace).</span></span> <span data-ttu-id="8bc10-118">Choisissez le **Niveau tarifaire du plan de service web** en fonction de la quantité de données que vous prévoyez d’importer.</span><span class="sxs-lookup"><span data-stu-id="8bc10-118">Choose the **Web service plan pricing tier** based on the amount of data you plan to import.</span></span> <span data-ttu-id="8bc10-119">Pour de meilleures performances, sélectionnez l’**Emplacement** qui est géographiquement le plus proche de vous.</span><span class="sxs-lookup"><span data-stu-id="8bc10-119">For best performance, select the **Location** that is geographically closest to you.</span></span>

1. <span data-ttu-id="8bc10-120">Après avoir créé la ressource, le tableau de bord de l’espace de travail Machine Learning Studio apparaît.</span><span class="sxs-lookup"><span data-stu-id="8bc10-120">After creating the resource, the Machine Learning Studio workspace dashboard will appear.</span></span> <span data-ttu-id="8bc10-121">Sélectionnez **Lancer Machine Learning Studio**.</span><span class="sxs-lookup"><span data-stu-id="8bc10-121">Select **Launch Machine Learning Studio**.</span></span>

   ![Interface utilisateur Azure Machine Learning Studio](media/azure-machine-learning-studio.png)

## <a name="work-with-azure-machine-learning-studio"></a><span data-ttu-id="8bc10-123">Utiliser Azure Machine Learning Studio</span><span class="sxs-lookup"><span data-stu-id="8bc10-123">Work with Azure Machine Learning Studio</span></span>

<span data-ttu-id="8bc10-124">Vous pouvez maintenant créer une nouvelle expérience ou importer un modèle de test existant à partir de la galerie d’échantillons.</span><span class="sxs-lookup"><span data-stu-id="8bc10-124">You can now create a new experiment, or import an existing experiment template from the sample gallery.</span></span> <span data-ttu-id="8bc10-125">Il existe des exemples d’expériences pour trois scénarios standard :</span><span class="sxs-lookup"><span data-stu-id="8bc10-125">There are sample experiments for three standard scenarios:</span></span>

- [<span data-ttu-id="8bc10-126">Prédiction de perte de clientèle</span><span class="sxs-lookup"><span data-stu-id="8bc10-126">Churn prediction</span></span>](#churn-analysis)

- [<span data-ttu-id="8bc10-127">Valeur de la durée de vie du client</span><span class="sxs-lookup"><span data-stu-id="8bc10-127">Customer lifetime value</span></span>](#customer-lifetime-value-prediction)

- [<span data-ttu-id="8bc10-128">Recommandation de produit ou meilleure action suivante</span><span class="sxs-lookup"><span data-stu-id="8bc10-128">Product recommendation or next best action</span></span>](#productrecommendation-or-next-best-action)

1. <span data-ttu-id="8bc10-129">Si vous créez une nouvelle expérience ou utilisez un modèle d’expérience de la galerie, vous devez configurer les propriétés **Importer des données**.</span><span class="sxs-lookup"><span data-stu-id="8bc10-129">If you create a new experiment or use an experiment template from the gallery, you need to configure the **Import Data** properties.</span></span> <span data-ttu-id="8bc10-130">Utilisez l’expérience guidée ou fournissez directement des détails pour accéder au stockage Blob Azure contenant vos données.</span><span class="sxs-lookup"><span data-stu-id="8bc10-130">Use the guided experience or directly provide details to access the Azure Blob Storage that contains your data.</span></span>  

   ![Expérience Azure Machine Learning Studio](media/azure-machine-learning-studio-experiment.png)

1. <span data-ttu-id="8bc10-132">Vous pouvez désormais créer un pipeline de traitement personnalisé pour nettoyer et prétraiter les données, extraire des fonctionnalités et former un modèle approprié.</span><span class="sxs-lookup"><span data-stu-id="8bc10-132">Now you can build a custom processing pipeline to clean and preprocess the data, extract features, and train a suitable model.</span></span>

1. <span data-ttu-id="8bc10-133">Testez et optimisez les performances du modèle.</span><span class="sxs-lookup"><span data-stu-id="8bc10-133">Test and optimize the model performance.</span></span>

1. <span data-ttu-id="8bc10-134">Lorsque vous êtes satisfait de la qualité d’un modèle, sélectionnez **Configurer le service Web** > **Service Web prédictif**.</span><span class="sxs-lookup"><span data-stu-id="8bc10-134">When you’re satisfied with the quality of a model, select **Set up web service** > **Predictive Web Service**.</span></span> <span data-ttu-id="8bc10-135">Cette option importe le modèle formé et le pipeline de fonctionnalités de l’expérience de formation vers un service prédictif.</span><span class="sxs-lookup"><span data-stu-id="8bc10-135">This option imports the trained model and the featurization pipeline from the training experiment to a predictive service.</span></span> <span data-ttu-id="8bc10-136">Le service prédictif peut utiliser un autre ensemble de données d’entrée avec le schéma utilisé dans l’expérience de formation pour effectuer des prédictions.</span><span class="sxs-lookup"><span data-stu-id="8bc10-136">The predictive service can take another set of input data with the schema used in the training experiment to make predictions.</span></span>

   ![Mettre en place un service Web prédictif](media/predictive-webservice-control.png)

1. <span data-ttu-id="8bc10-138">Une fois l’expérience de service Web prédictif réussie, vous pouvez la déployer pour la planification automatique.</span><span class="sxs-lookup"><span data-stu-id="8bc10-138">Once the predictive web service experiment is successful, you can deploy it for auto scheduling.</span></span> <span data-ttu-id="8bc10-139">Pour que le service Web fonctionne avec Customer Insights, sélectionnez **Déployer le service Web** > **Déployer le service Web [Nouveau] - Version préliminaire**.</span><span class="sxs-lookup"><span data-stu-id="8bc10-139">To have the web service work with Customer Insights, select **Deploy Web Service** > **Deploy Web Service [New] Preview**.</span></span> <span data-ttu-id="8bc10-140">[En savoir plus sur le déploiement d’un service Web](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span><span class="sxs-lookup"><span data-stu-id="8bc10-140">[Learn more about deploying a web service](/azure/machine-learning/studio/deploy-a-machine-learning-web-service).</span></span>

   ![Déployer un service Web prédictif](media/predictive-webservice-deploy.png)

## <a name="sample-models-from-the-gallery"></a><span data-ttu-id="8bc10-142">Exemples de modèles de la galerie</span><span class="sxs-lookup"><span data-stu-id="8bc10-142">Sample models from the gallery</span></span>

<span data-ttu-id="8bc10-143">Nous utiliserons le scénario fictif de Contoso Hotel pour les modèles de cet article.</span><span class="sxs-lookup"><span data-stu-id="8bc10-143">We'll use a fictitious scenario of Contoso Hotel for the models in this article.</span></span> <span data-ttu-id="8bc10-144">Contoso Hotel rassemble les données suivantes :</span><span class="sxs-lookup"><span data-stu-id="8bc10-144">Contoso Hotel gathers the following data:</span></span>

- <span data-ttu-id="8bc10-145">Données CRM issues de l’activité hôtelière.</span><span class="sxs-lookup"><span data-stu-id="8bc10-145">CRM data consisting of hotel stay activity.</span></span> <span data-ttu-id="8bc10-146">Le jeu de données comprend des informations sur les dates de séjour de chaque client enregistré.</span><span class="sxs-lookup"><span data-stu-id="8bc10-146">The data set includes information about the dates of stay for each registered customer.</span></span> <span data-ttu-id="8bc10-147">Il contient également des informations sur les réservations, les types de chambres, les détails des dépenses, etc.</span><span class="sxs-lookup"><span data-stu-id="8bc10-147">It also contains information about the booking, room types, details of spend, and so on.</span></span> <span data-ttu-id="8bc10-148">Les données couvrent quatre ans, de janvier 2014 à janvier 2018.</span><span class="sxs-lookup"><span data-stu-id="8bc10-148">The data spans four years, from January 2014 to January 2018.</span></span>
- <span data-ttu-id="8bc10-149">Profils des clients de l’hôtel.</span><span class="sxs-lookup"><span data-stu-id="8bc10-149">Customer profiles of hotel guests.</span></span> <span data-ttu-id="8bc10-150">Ces profils contiennent des informations sur chaque client, notamment son nom, sa date de naissance, son adresse postale, son sexe et son numéro de téléphone.</span><span class="sxs-lookup"><span data-stu-id="8bc10-150">These profiles contain information about each customer, including their name, birthdate, postal address, gender, and phone number.</span></span>
- <span data-ttu-id="8bc10-151">Utilisation des services proposés par l’hôtel, tels que le spa, la blanchisserie, le WiFi ou le coursier.</span><span class="sxs-lookup"><span data-stu-id="8bc10-151">Usage of services offered by the hotel, such as the spa, laundry, WiFi, or courier.</span></span> <span data-ttu-id="8bc10-152">Ces informations sont enregistrées pour chaque client enregistré.</span><span class="sxs-lookup"><span data-stu-id="8bc10-152">This information is logged for each registered customer.</span></span> <span data-ttu-id="8bc10-153">En règle générale, l’utilisation des services est liée au séjour.</span><span class="sxs-lookup"><span data-stu-id="8bc10-153">Typically, use of services is linked with the stay.</span></span> <span data-ttu-id="8bc10-154">Dans certains cas, les services peuvent être utilisés par les clients sans qu’ils séjournent à l’hôtel.</span><span class="sxs-lookup"><span data-stu-id="8bc10-154">In some cases, services can be used by customers without staying in the hotel.</span></span>

## <a name="churn-analysis"></a><span data-ttu-id="8bc10-155">Analyse de perte de clientèle</span><span class="sxs-lookup"><span data-stu-id="8bc10-155">Churn Analysis</span></span>

<span data-ttu-id="8bc10-156">L’analyse de perte de clientèle s’applique à différents domaines d’activité.</span><span class="sxs-lookup"><span data-stu-id="8bc10-156">Churn analysis applies to different business areas.</span></span> <span data-ttu-id="8bc10-157">Dans cet exemple, nous allons examiner la perte de clientèle des services, en particulier dans le contexte des services hôteliers comme décrit ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="8bc10-157">In this example, we’re going to look at service churn, specifically in the context of hotel services as described above.</span></span> <span data-ttu-id="8bc10-158">Il fournit un exemple fonctionnel de pipeline de modèle de bout en bout qui peut être utilisé comme point de départ pour tout autre type de modèle de perte de clientèle.</span><span class="sxs-lookup"><span data-stu-id="8bc10-158">It provides a working example of an end–to–end model pipeline that can be used as a starting point for any other type of churn model.</span></span>

### <a name="definition-of-churn"></a><span data-ttu-id="8bc10-159">Définition de perte de clientèle</span><span class="sxs-lookup"><span data-stu-id="8bc10-159">Definition of Churn</span></span>

<span data-ttu-id="8bc10-160">La définition de perte de clientèle peut différer en fonction du scénario.</span><span class="sxs-lookup"><span data-stu-id="8bc10-160">The definition of churn can differ based on the scenario.</span></span> <span data-ttu-id="8bc10-161">Dans cet exemple, un client qui n’a pas séjourné à l’hôtel au cours de l’année écoulée doit être étiqueté comme perdu.</span><span class="sxs-lookup"><span data-stu-id="8bc10-161">In this example, a guest who hasn’t visited the hotel in the past year should be labeled as churned.</span></span>  

<span data-ttu-id="8bc10-162">Le modèle d’expérience peut être importé de la galerie.</span><span class="sxs-lookup"><span data-stu-id="8bc10-162">The experiment template can be imported from the gallery.</span></span> <span data-ttu-id="8bc10-163">Tout d’abord, assurez-vous d’importer les données pour **Activité de séjour à l’hôtel**, **Données client**, et **Données d’utilisation du service** à partir du stockage Blob Azure.</span><span class="sxs-lookup"><span data-stu-id="8bc10-163">First, ensure that you import the data for **Hotel Stay Activity**, **Customer data**, and **Service Usage Data** from Azure Blob storage.</span></span>

   ![Importer des données pour le modèle de perte de clientèle](media/import-data-azure-blob-storage.png)

### <a name="featurization"></a><span data-ttu-id="8bc10-165">Caractérisation</span><span class="sxs-lookup"><span data-stu-id="8bc10-165">Featurization</span></span>

<span data-ttu-id="8bc10-166">Sur la base de la définition de perte de clientèle, nous identifions d’abord les caractéristiques brutes qui influenceront l’étiquette.</span><span class="sxs-lookup"><span data-stu-id="8bc10-166">Based on the definition of churn, we first identify the raw features that will influence the label.</span></span> <span data-ttu-id="8bc10-167">Ensuite, nous convertissons ces caractéristiques brutes en caractéristiques numériques qui peuvent être utilisées avec les modèles Machine Learning.</span><span class="sxs-lookup"><span data-stu-id="8bc10-167">Then, we process these raw features into numerical features that can be used with machine learning models.</span></span> <span data-ttu-id="8bc10-168">L’intégration des données se produit dans Customer Insights afin que nous puissions joindre ces tables à l’aide de l’*ID de client*.</span><span class="sxs-lookup"><span data-stu-id="8bc10-168">Data integration happens in Customer Insights so we can join these tables by using the *Customer ID*.</span></span>

   ![Joindre les données importées](media/join-imported-data.png)

<span data-ttu-id="8bc10-170">La caractérisation de la construction du modèle pour l’analyse de perte de clientèle peut être un peu délicate.</span><span class="sxs-lookup"><span data-stu-id="8bc10-170">The featurization for building the model for churn analysis can be a little tricky.</span></span> <span data-ttu-id="8bc10-171">Les données sont fonction du temps, les nouvelles activités hôtelières étant enregistrées quotidiennement.</span><span class="sxs-lookup"><span data-stu-id="8bc10-171">The data is a function of time with new hotel activity recorded on daily basis.</span></span> <span data-ttu-id="8bc10-172">Pendant la caractérisation, nous voulons générer des entités statiques à partir des données dynamiques.</span><span class="sxs-lookup"><span data-stu-id="8bc10-172">During featurization, we want to generate static features from the dynamic data.</span></span> <span data-ttu-id="8bc10-173">Dans ce cas, nous générons plusieurs fonctionnalités à partir de l’activité hôtelière avec une fenêtre glissante d’un an.</span><span class="sxs-lookup"><span data-stu-id="8bc10-173">In this case, we generate multiple features from hotel activity with a sliding window of one year.</span></span> <span data-ttu-id="8bc10-174">Nous développons également les fonctionnalités catégorielles telles que le type de chambre ou le type de réservation dans des fonctionnalités distinctes à l’aide de l’encodage à chaud.</span><span class="sxs-lookup"><span data-stu-id="8bc10-174">We also expand the categorical features like room type or booking type into separate features using one-hot encoding.</span></span>  

<span data-ttu-id="8bc10-175">Liste finale des fonctionnalités :</span><span class="sxs-lookup"><span data-stu-id="8bc10-175">Final list of features:</span></span>

| <span data-ttu-id="8bc10-176">**Numéro**</span><span class="sxs-lookup"><span data-stu-id="8bc10-176">**Number**</span></span>  | <span data-ttu-id="8bc10-177">**Original_Column**</span><span class="sxs-lookup"><span data-stu-id="8bc10-177">**Original_Column**</span></span>          | <span data-ttu-id="8bc10-178">**Fonctionnalités dérivées**</span><span class="sxs-lookup"><span data-stu-id="8bc10-178">**Derived Features**</span></span>                                                                                                                      |
|-------------|------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------|
| <span data-ttu-id="8bc10-179">1</span><span class="sxs-lookup"><span data-stu-id="8bc10-179">1</span></span>           | <span data-ttu-id="8bc10-180">Type de chambre</span><span class="sxs-lookup"><span data-stu-id="8bc10-180">Room Type</span></span>                    | <span data-ttu-id="8bc10-181">RoomTypeLargeCount, RoomTypeSmallCount</span><span class="sxs-lookup"><span data-stu-id="8bc10-181">RoomTypeLargeCount, RoomTypeSmallCount</span></span>                                                                                                    |
| <span data-ttu-id="8bc10-182">2</span><span class="sxs-lookup"><span data-stu-id="8bc10-182">2</span></span>           | <span data-ttu-id="8bc10-183">Type de réservation</span><span class="sxs-lookup"><span data-stu-id="8bc10-183">Booking Type</span></span>                 | <span data-ttu-id="8bc10-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span><span class="sxs-lookup"><span data-stu-id="8bc10-184">BookingTypeOnlineCount, BookingTypePhoneCallCount</span></span>                                                                                         |
| <span data-ttu-id="8bc10-185">3</span><span class="sxs-lookup"><span data-stu-id="8bc10-185">3</span></span>           | <span data-ttu-id="8bc10-186">Catégorie de voyage</span><span class="sxs-lookup"><span data-stu-id="8bc10-186">Travel Category</span></span>              | <span data-ttu-id="8bc10-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span><span class="sxs-lookup"><span data-stu-id="8bc10-187">TravelCategoryBusinessCount, TravelCategoryLeisureCount</span></span>                                                                                   |
| <span data-ttu-id="8bc10-188">4</span><span class="sxs-lookup"><span data-stu-id="8bc10-188">4</span></span>           | <span data-ttu-id="8bc10-189">Dollars dépensés</span><span class="sxs-lookup"><span data-stu-id="8bc10-189">Dollars Spent</span></span>                | <span data-ttu-id="8bc10-190">TotalDollarSpent</span><span class="sxs-lookup"><span data-stu-id="8bc10-190">TotalDollarSpent</span></span>                                                                                                                          |
| <span data-ttu-id="8bc10-191">5</span><span class="sxs-lookup"><span data-stu-id="8bc10-191">5</span></span>           | <span data-ttu-id="8bc10-192">Dates d’arrivée et de départ</span><span class="sxs-lookup"><span data-stu-id="8bc10-192">Check-in and Checkout dates</span></span>  | <span data-ttu-id="8bc10-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span><span class="sxs-lookup"><span data-stu-id="8bc10-193">StayDayCount, StayDayCount2016, StayDayCount2015, StayDayCount2014, StayCount, StayCount2016.</span></span> <span data-ttu-id="8bc10-194">StayCount2015, StayCount2014</span><span class="sxs-lookup"><span data-stu-id="8bc10-194">StayCount2015, StayCount2014</span></span>                |
| <span data-ttu-id="8bc10-195">6</span><span class="sxs-lookup"><span data-stu-id="8bc10-195">6</span></span>           | <span data-ttu-id="8bc10-196">Utilisation du service</span><span class="sxs-lookup"><span data-stu-id="8bc10-196">Service Usage</span></span>                | <span data-ttu-id="8bc10-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span><span class="sxs-lookup"><span data-stu-id="8bc10-197">UsageTenure, ConciergeUsage, CourierUsage, DryCleaningUsage, GymUsage, PhoneUsage, RestaurantUsage, SpaUsage, TelevisionUsage, WifiUsage</span></span>  |

### <a name="model-selection"></a><span data-ttu-id="8bc10-198">Sélection du modèle</span><span class="sxs-lookup"><span data-stu-id="8bc10-198">Model selection</span></span>

<span data-ttu-id="8bc10-199">Nous devons maintenant choisir l’algorithme optimal à utiliser.</span><span class="sxs-lookup"><span data-stu-id="8bc10-199">Now we need to choose the optimal algorithm to use.</span></span> <span data-ttu-id="8bc10-200">Dans ce cas, la plupart des fonctionnalités sont basées sur des fonctionnalités catégorielles.</span><span class="sxs-lookup"><span data-stu-id="8bc10-200">In this case, most features are based on categorical features.</span></span> <span data-ttu-id="8bc10-201">En règle générale, les modèles basés sur un arbre de décision fonctionnent bien.</span><span class="sxs-lookup"><span data-stu-id="8bc10-201">Typically, decision tree–based models work well.</span></span> <span data-ttu-id="8bc10-202">S’il n’y a que des fonctionnalités numériques, les réseaux de neurones pourraient être un meilleur choix.</span><span class="sxs-lookup"><span data-stu-id="8bc10-202">If there are only numerical features, neural networks could be a better choice.</span></span> <span data-ttu-id="8bc10-203">La machine à vecteurs de support (SVM) est également un bon candidat dans de telles situations ; cependant, elle nécessite un peu de réglages pour extraire les meilleures performances.</span><span class="sxs-lookup"><span data-stu-id="8bc10-203">Support vector machine (SVM) also is a good candidate in such situations; however, it needs quite a bit of tuning to extract the best performance.</span></span> <span data-ttu-id="8bc10-204">Nous choisissons **Arbre de décision amélioré à deux classes** comme premier modèle de choix suivi de **SVM à deux classes** comme deuxième modèle.</span><span class="sxs-lookup"><span data-stu-id="8bc10-204">We choose **Two-Class Boosted Decision Tree** as the first model of choice followed by **Two-Class SVM** as the second model.</span></span> <span data-ttu-id="8bc10-205">Azure Machine Learning Studio vous permet de faire des tests A/B, il est donc avantageux de commencer avec deux modèles plutôt qu’un.</span><span class="sxs-lookup"><span data-stu-id="8bc10-205">Azure Machine Learning Studio lets you do A/B testing, so it’s beneficial to start with two models rather than one.</span></span>

<span data-ttu-id="8bc10-206">L’image suivante montre le pipeline de formation et d’évaluation du modèle d’Azure Machine Learning Studio :</span><span class="sxs-lookup"><span data-stu-id="8bc10-206">The following image shows the model training and evaluation pipeline from Azure Machine Learning Studio:</span></span>

![Modèle de perte de clientèle dans Azure Machine Learning Studio](media/azure-machine-learning-model.png)

<span data-ttu-id="8bc10-208">Nous appliquons également une technique appelée **Importance de la fonction de permutation**, un aspect important de l’optimisation des modèles.</span><span class="sxs-lookup"><span data-stu-id="8bc10-208">We also apply a technique called **Permutation Feature Importance**, an important aspect of model optimization.</span></span> <span data-ttu-id="8bc10-209">Les modèles intégrés ont peu ou pas d’informations sur l’impact d’une fonctionnalité spécifique sur la prédiction finale.</span><span class="sxs-lookup"><span data-stu-id="8bc10-209">Built-in models have little to no insight into the impact of any specific feature on the final prediction.</span></span> <span data-ttu-id="8bc10-210">Le calculateur d’importance des caractéristiques utilise un algorithme personnalisé pour calculer l’influence de caractéristiques individuelles sur le résultat d’un modèle spécifique.</span><span class="sxs-lookup"><span data-stu-id="8bc10-210">The feature importance calculator uses a custom algorithm to compute the influence of individual features on the outcome for a specific model.</span></span> <span data-ttu-id="8bc10-211">L’importance de la fonctionnalité est normalisée entre +1 et -1.</span><span class="sxs-lookup"><span data-stu-id="8bc10-211">The feature importance is normalized between +1 to -1.</span></span> <span data-ttu-id="8bc10-212">Une influence négative signifie que la fonction correspondante a une influence contre-intuitive sur le résultat et doit être supprimée du modèle.</span><span class="sxs-lookup"><span data-stu-id="8bc10-212">A negative influence means the corresponding feature has counter-intuitive influence on the outcome and should be removed from the model.</span></span> <span data-ttu-id="8bc10-213">Une influence positive indique que la fonctionnalité contribue fortement à la prédiction.</span><span class="sxs-lookup"><span data-stu-id="8bc10-213">A positive influence indicates the feature is contributing heavily towards the prediction.</span></span> <span data-ttu-id="8bc10-214">Ces valeurs ne sont pas des coefficients de corrélation car ce sont des métriques différentes.</span><span class="sxs-lookup"><span data-stu-id="8bc10-214">These values aren't correlation coefficients as they are different metrics.</span></span> <span data-ttu-id="8bc10-215">Pour plus d’informations, consultez [Importance de la fonction de permutation](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span><span class="sxs-lookup"><span data-stu-id="8bc10-215">For more information, see [Permutation Feature Importance](/azure/machine-learning/studio-module-reference/permutation-feature-importance).</span></span>

<span data-ttu-id="8bc10-216">L’ensemble de [l’expérience de perte de clientèle est disponible dans Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span><span class="sxs-lookup"><span data-stu-id="8bc10-216">The entire [churn experiment is available in the Azure AI Gallery](https://gallery.azure.ai/Experiment/Hotel-Churn-Predictive-Exp).</span></span>

## <a name="customer-lifetime-value-prediction"></a><span data-ttu-id="8bc10-217">Prédiction de la valeur de la durée de vie du client</span><span class="sxs-lookup"><span data-stu-id="8bc10-217">Customer lifetime value prediction</span></span>

<span data-ttu-id="8bc10-218">Le calcul de la valeur de la durée de vie du client (CLTV) est l’une des mesures clés qu’une entreprise peut utiliser pour évaluer et segmenter ses clients.</span><span class="sxs-lookup"><span data-stu-id="8bc10-218">The customer lifetime value (CLTV) calculation is one of the key metrics that a business can use to assess and segment its customers.</span></span> <span data-ttu-id="8bc10-219">Pour l’hôtellerie, il est essentiel de connaître ses clients.</span><span class="sxs-lookup"><span data-stu-id="8bc10-219">For the hotel business, it’s critical to know their customers.</span></span> <span data-ttu-id="8bc10-220">Par exemple, comprendre les facteurs qui caractérisent les bons clients est crucial.</span><span class="sxs-lookup"><span data-stu-id="8bc10-220">For example, understanding factors that make up good customers is crucial information.</span></span> <span data-ttu-id="8bc10-221">Cela aide la direction de l’hôtel à évaluer les fonctionnalités sur lesquelles elle doit se concentrer et à améliorer ses décisions pour satisfaire ses clients à haut revenu.</span><span class="sxs-lookup"><span data-stu-id="8bc10-221">It helps the hotel management assess which features they need to focus on and improve to satisfy their high paying customers.</span></span> <span data-ttu-id="8bc10-222">Ces décisions peuvent avoir un impact direct sur les ventes et les bénéfices.</span><span class="sxs-lookup"><span data-stu-id="8bc10-222">These decisions can have a direct impact on sales and earnings.</span></span>  

### <a name="definition-of-cltv"></a><span data-ttu-id="8bc10-223">Définition de la CLTV</span><span class="sxs-lookup"><span data-stu-id="8bc10-223">Definition of CLTV</span></span>

<span data-ttu-id="8bc10-224">Pour cet exemple, nous définissons la CLTV d’un client comme le montant total que le client est censé dépenser au cours des 365 prochains jours.</span><span class="sxs-lookup"><span data-stu-id="8bc10-224">For this example, we define the CLTV of a customer as the total dollar amount the customer is expected to spend in the next 365 days.</span></span> <span data-ttu-id="8bc10-225">Nous allons utiliser les données des trois dernières années pour tous les clients afin de prédire cette valeur.</span><span class="sxs-lookup"><span data-stu-id="8bc10-225">We are going to use the past three years’ worth of data for all customers to predict this value.</span></span>

### <a name="featurization"></a><span data-ttu-id="8bc10-226">Caractérisation</span><span class="sxs-lookup"><span data-stu-id="8bc10-226">Featurization</span></span>

<span data-ttu-id="8bc10-227">Dans ce cas, la caractérisation sera assez similaire au scénario de désabonnement.</span><span class="sxs-lookup"><span data-stu-id="8bc10-227">In this case, featurization is going to be quite like the churn scenario.</span></span> <span data-ttu-id="8bc10-228">Cependant, les étiquettes et les valeurs prévues sont différentes de celles définies ci-dessus.</span><span class="sxs-lookup"><span data-stu-id="8bc10-228">However, the labels and predicted values are different than defined above.</span></span>

### <a name="model-selection"></a><span data-ttu-id="8bc10-229">Sélection du modèle</span><span class="sxs-lookup"><span data-stu-id="8bc10-229">Model selection</span></span>

<span data-ttu-id="8bc10-230">Prédire la CLTV est un problème de régression car la valeur prédite est une variable continue à valeur positive.</span><span class="sxs-lookup"><span data-stu-id="8bc10-230">Predicting the CLTV is a regression problem as the predicted value is a positive valued continuous variable.</span></span> <span data-ttu-id="8bc10-231">En fonction des propriétés des fonctionnalités, nous sélectionnons **Régression améliorée de l’arbre de décision** comme un seul algorithme et **Régression du réseau neuronal** comme un autre algorithme pour entraîner le modèle.</span><span class="sxs-lookup"><span data-stu-id="8bc10-231">Based on the feature properties, we select **Boosted Decision Tree Regression** as one algorithm and **Neural Network Regression** as another algorithm to train the model.</span></span>

## <a name="product-recommendation-or-next-best-action"></a><span data-ttu-id="8bc10-232">Recommandation de produit ou meilleure action suivante</span><span class="sxs-lookup"><span data-stu-id="8bc10-232">Product recommendation or Next Best Action</span></span>

<span data-ttu-id="8bc10-233">La recommandation de produit dans un scénario hôtelier est interprétée comme une recommandation de services offerts par l’hôtel aux clients.</span><span class="sxs-lookup"><span data-stu-id="8bc10-233">Product recommendation in a hotel scenario is interpreted as recommending services offered by the hotel to the customers.</span></span> <span data-ttu-id="8bc10-234">L’objectif est de choisir les services appropriés pour les clients afin que leur utilisation soit maximisée.</span><span class="sxs-lookup"><span data-stu-id="8bc10-234">The objective is to choose the appropriate services for customers so that their usage is maximized.</span></span> <span data-ttu-id="8bc10-235">C’est similaire aux recommandations de films pour les utilisateurs de services de streaming vidéo.</span><span class="sxs-lookup"><span data-stu-id="8bc10-235">It’s similar to movie recommendations for video streaming service users.</span></span>

### <a name="definition-of-product-recommendation-or-next-best-action"></a><span data-ttu-id="8bc10-236">Définition d’une recommandation de produit ou meilleure action suivante</span><span class="sxs-lookup"><span data-stu-id="8bc10-236">Definition of Product Recommendation or Next Best Action</span></span>

<span data-ttu-id="8bc10-237">Nous définissons l’objectif comme la maximisation du montant de l’utilisation des services en offrant les meilleurs services correspondants aux clients de l’hôtel en fonction de leur intérêt.</span><span class="sxs-lookup"><span data-stu-id="8bc10-237">We define the goal as maximizing the dollar amount of service usage by offering the best matching services to hotel customers according to their interest.</span></span>

### <a name="featurization"></a><span data-ttu-id="8bc10-238">Caractérisation</span><span class="sxs-lookup"><span data-stu-id="8bc10-238">Featurization</span></span>

<span data-ttu-id="8bc10-239">Comme le modèle de perte de clientèle, nous joignons le ServiceCustomerID de l’hôtel avec le CustomerID afin de créer des recommandations cohérentes par CustomerID.</span><span class="sxs-lookup"><span data-stu-id="8bc10-239">Like the churn model, we are joining the hotel ServiceCustomerID with CustomerID in order to build recommendations consistently per CustomerID.</span></span>

![Mise en avant du modèle de recommandation](media/azure-machine-learning-model-featurization.png)

<span data-ttu-id="8bc10-241">Les données proviennent de trois entités différentes et les caractéristiques en sont dérivées.</span><span class="sxs-lookup"><span data-stu-id="8bc10-241">The data is sourced from three different entities and features are derived from them.</span></span> <span data-ttu-id="8bc10-242">La caractérisation du problème de recommandation est différente par rapport aux scénarios de perte de clientèle ou CLTV.</span><span class="sxs-lookup"><span data-stu-id="8bc10-242">The featurization for the problem of recommendation is different compared to churn or CLTV scenarios.</span></span> <span data-ttu-id="8bc10-243">Le modèle de recommandation a besoin de données d’entrée sous la forme de trois ensembles de fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="8bc10-243">The recommendation model needs input data in the form of three sets of features.</span></span>

### <a name="model-selection"></a><span data-ttu-id="8bc10-244">Sélection du modèle</span><span class="sxs-lookup"><span data-stu-id="8bc10-244">Model selection</span></span>

<span data-ttu-id="8bc10-245">Nous prédisons les produits ou services en utilisant l’algorithme appelé **Entraîner la recommandation Matchbox** pour entraîner le modèle de recommandation.</span><span class="sxs-lookup"><span data-stu-id="8bc10-245">We predict products or services by using the algorithm called **Train Matchbox Recommender** to train the recommendation model.</span></span>

![Algorithme de recommandation de produit](media/azure-machine-learning-model-recommendation-algorithm.png)

<span data-ttu-id="8bc10-247">Les trois ports d’entrée pour le modèle **Entraîner la recommandation Matchbox** prend en compte les données d’utilisation du service de formation, la description du client (facultatif) et la description du service.</span><span class="sxs-lookup"><span data-stu-id="8bc10-247">The three input ports for the **Train Matchbox Recommender** model takes in the training service usage data, customer description (optional), and service description.</span></span> <span data-ttu-id="8bc10-248">Il existe trois façons différentes de noter le modèle.</span><span class="sxs-lookup"><span data-stu-id="8bc10-248">There are three different ways of scoring the model.</span></span> <span data-ttu-id="8bc10-249">La première concerne l’évaluation du modèle où un score de gain cumulé actualisé normalisé (NDCG) est calculé pour classer les éléments notés.</span><span class="sxs-lookup"><span data-stu-id="8bc10-249">One is for model evaluation where a Normalized Discounted Cumulative Gain (NDCG) score is calculated to rank the rated items.</span></span> <span data-ttu-id="8bc10-250">Dans cette expérience, nous avons le score NDCG de 0,97.</span><span class="sxs-lookup"><span data-stu-id="8bc10-250">In this experiment, we have the NDCG score as 0.97.</span></span> <span data-ttu-id="8bc10-251">Les deux autres options évaluent le modèle sur l’ensemble du catalogue de services recommandables, ou évaluent uniquement les éléments que les utilisateurs n’ont pas utilisés auparavant.</span><span class="sxs-lookup"><span data-stu-id="8bc10-251">The other two options are scoring the model on the entire recommendable service catalog, or scoring only on items that users have not used before.</span></span>

<span data-ttu-id="8bc10-252">En regardant plus loin les distributions des recommandations sur l’ensemble du catalogue de services, nous remarquons que le téléphone, le WiFi et le coursier sont les meilleurs services à recommander.</span><span class="sxs-lookup"><span data-stu-id="8bc10-252">Looking further on the distributions of the recommendations on the entire service catalog, we notice that phone, WiFi, and courier are the top services to be recommended.</span></span> <span data-ttu-id="8bc10-253">Ceci est cohérent avec ce que nous avons trouvé à partir des distributions des données de consommation de services :</span><span class="sxs-lookup"><span data-stu-id="8bc10-253">This is consistent with what we found from the distributions of the service consumption data:</span></span>

![Sortie de modèle de recommandation](media/azure-machine-learning-model-output.png)

<span data-ttu-id="8bc10-255">L’ensemble de l’[expérience de recommandation de produit est accessible dans Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span><span class="sxs-lookup"><span data-stu-id="8bc10-255">The entire [product recommendation experiment can be accessed in Azure AI Gallery.](https://gallery.azure.ai/Experiment/Recommendation-4)</span></span>

## <a name="integrate-custom-models"></a><span data-ttu-id="8bc10-256">Intégrer des modèles personnalisés</span><span class="sxs-lookup"><span data-stu-id="8bc10-256">Integrate custom models</span></span>

<span data-ttu-id="8bc10-257">Pour utiliser ces prédictions dans Customer Insights, vous devez **exporter** les prédictions ainsi que les identifiants clients.</span><span class="sxs-lookup"><span data-stu-id="8bc10-257">To use these predictions in Customer Insights, you need to **export** the predictions along with the customer IDs.</span></span> <span data-ttu-id="8bc10-258">[Exportez-les vers le même emplacement de stockage Blob Azure](/azure/storage/common/storage-import-export-data-from-blobs) que celui vers lequel vous exportez les données sources.</span><span class="sxs-lookup"><span data-stu-id="8bc10-258">[Export them to the same Azure Blob storage location](/azure/storage/common/storage-import-export-data-from-blobs) that you export the source data to.</span></span> <span data-ttu-id="8bc10-259">Le service Web prédictif peut être planifié pour s’exécuter régulièrement et mettre à jour les scores.</span><span class="sxs-lookup"><span data-stu-id="8bc10-259">The predictive web service can be scheduled to run regularly and update the scores.</span></span>

<span data-ttu-id="8bc10-260">Les données générées par le modèle personnalisé peuvent être utilisées pour enrichir davantage vos données client.</span><span class="sxs-lookup"><span data-stu-id="8bc10-260">Data generated by the custom model can be used to further enrich your customer data.</span></span> <span data-ttu-id="8bc10-261">Pour plus d’informations, voir [Modèles personnalisés Machine Learning](custom-models.md).</span><span class="sxs-lookup"><span data-stu-id="8bc10-261">For more information, see [Custom machine learning models](custom-models.md).</span></span>


[!INCLUDE[footer-include](../includes/footer-banner.md)]