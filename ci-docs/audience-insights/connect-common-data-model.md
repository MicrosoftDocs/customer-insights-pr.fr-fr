---
title: Connecter les données Common Data Model à un compte Azure Data Lake
description: Utilisez les données Common Data Model avec Azure Data Lake Storage.
ms.date: 05/29/2020
ms.service: customer-insights
ms.subservice: audience-insights
ms.topic: how-to
author: m-hartmann
ms.author: mhart
ms.reviewer: adkuppa
manager: shellyha
ms.openlocfilehash: 247e4d9c47ff2373065ebf3c6d554323e45a120b
ms.sourcegitcommit: 139548f8a2d0f24d54c4a6c404a743eeeb8ef8e0
ms.translationtype: HT
ms.contentlocale: fr-FR
ms.lasthandoff: 02/15/2021
ms.locfileid: "5267857"
---
# <a name="connect-to-a-common-data-model-folder-using-an-azure-data-lake-account"></a><span data-ttu-id="c6e1f-103">Se connecter à un dossier Common Data Model à l’aide d’un compte Azure Data Lake</span><span class="sxs-lookup"><span data-stu-id="c6e1f-103">Connect to a Common Data Model folder using an Azure Data Lake account</span></span>

<span data-ttu-id="c6e1f-104">Cet article fournit des informations sur l’ingestion de données à partir d’un dossier Common Data Model en utilisant votre compte Azure Data Lake Storage Gen2.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-104">This article provides information on how to ingest data from a Common Data Model folder using your Azure Data Lake Storage Gen2 account.</span></span>

## <a name="important-considerations"></a><span data-ttu-id="c6e1f-105">Remarques importantes</span><span class="sxs-lookup"><span data-stu-id="c6e1f-105">Important considerations</span></span>

- <span data-ttu-id="c6e1f-106">Les données de votre lac de données Azure Data Lake doivent respecter la norme Common Data Model.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-106">Data in your Azure Data Lake needs to follow the Common Data Model standard.</span></span> <span data-ttu-id="c6e1f-107">Les autres formats ne sont pas pris en charge pour le moment.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-107">Other formats aren't supported at the moment.</span></span>

- <span data-ttu-id="c6e1f-108">L’ingestion de données prend en charge les comptes de stockage Azure Data Lake *Gen2* exclusivement.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-108">Data ingestion supports Azure Data Lake *Gen2* storage accounts exclusively.</span></span> <span data-ttu-id="c6e1f-109">Vous ne pouvez pas utiliser les comptes de stockage Azure Data Lake Gen1 pour ingérer des données.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-109">You can't use Azure Data Lake Gen1 storage accounts to ingest data.</span></span>

- <span data-ttu-id="c6e1f-110">Pour vous authentifier dans un principal de service Azure, assurez-vous que celui-ci est configuré dans votre client.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-110">To authenticate with an Azure service principal, make sure it's configured in your tenant.</span></span> <span data-ttu-id="c6e1f-111">Pour plus d’informations, consultez [Connecter les informations sur l’audience à un compte Azure Data Lake Storage Gen2 avec un principal de service Azure](connect-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="c6e1f-111">For more information, see [Connect audience insights to an Azure Data Lake Storage Gen2 account with an Azure service principal](connect-service-principal.md).</span></span>

- <span data-ttu-id="c6e1f-112">Le compte Azure Data Lake à partir duquel vous souhaitez vous connecter et ingérer des données doit se trouver dans la même région Azure que l’environnement Dynamics 365 Customer Insights.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-112">The Azure Data Lake you want to connect and ingest data from have to be in the same Azure region as the Dynamics 365 Customer Insights environment.</span></span> <span data-ttu-id="c6e1f-113">Les connexions à un dossier Common Data Model à partir d’un lac de données situé dans une autre région Azure ne sont pas prises en charge.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-113">Connections to a Common Data Model folder from a data lake in a different Azure region is not supported.</span></span> <span data-ttu-id="c6e1f-114">Pour connaître la région Azure de l’environnement, accédez à **Administrateur** > **Système** > **À propos de** dans les informations sur l’audience.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-114">To know the Azure region of the environment, go to **Admin** > **System** > **About** in audience insights.</span></span>

- <span data-ttu-id="c6e1f-115">Les données stockées dans les services en ligne peuvent être stockées dans un emplacement différent de celui où les données sont traitées ou stockées dans Dynamics 365 Customer Insights.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-115">Data stored in online services, may be stored in a different location than where data is processed or stored in Dynamics 365 Customer Insights.</span></span><span data-ttu-id="c6e1f-116"> En important ou en vous connectant aux données stockées dans les services en ligne, vous acceptez que les données puissent être transférées et stockées avec Dynamics 365 Customer Insights. [En savoir plus sur le Centre de gestion de la confidentialité Microsoft.](https://www.microsoft.com/trust-center)</span><span class="sxs-lookup"><span data-stu-id="c6e1f-116"> By importing or connecting to data stored in online services, you agree that data can be transferred to and stored with Dynamics 365 Customer Insights. [Learn more at the Microsoft Trust Center.](https://www.microsoft.com/trust-center)</span></span>

## <a name="connect-to-a-common-data-model-folder"></a><span data-ttu-id="c6e1f-117">Se connecter à un dossier Common Data Model</span><span class="sxs-lookup"><span data-stu-id="c6e1f-117">Connect to a Common Data Model folder</span></span>

1. <span data-ttu-id="c6e1f-118">Dans les informations sur l’audience, accédez à **Données** > **Sources de données**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-118">In audience insights, go to **Data** > **Data sources**.</span></span>

1. <span data-ttu-id="c6e1f-119">Sélectionnez **Ajouter une source de données**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-119">Select **Add data source**.</span></span>

1. <span data-ttu-id="c6e1f-120">Sélectionnez **Se connecter à un dossier Common Data Model**, entrez un **Nom** pour la source de données et sélectionnez **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-120">Select **Connect to a Common Data Model folder**, enter a **Name** for the data source, and select **Next**.</span></span> <span data-ttu-id="c6e1f-121">Instructions relatives au nom :</span><span class="sxs-lookup"><span data-stu-id="c6e1f-121">Name guidelines:</span></span> 
   - <span data-ttu-id="c6e1f-122">Commencez par une lettre.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-122">Start with a letter.</span></span>
   - <span data-ttu-id="c6e1f-123">Utilisez uniquement des lettres et des chiffres.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-123">Use letters and numbers only.</span></span> <span data-ttu-id="c6e1f-124">Les espaces et caractères spéciaux ne sont pas autorisés.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-124">Special characters and spaces are not allowed.</span></span>
   - <span data-ttu-id="c6e1f-125">Utilisez entre 3 et 64 caractères.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-125">Use between 3 and 64 characters.</span></span>

1. <span data-ttu-id="c6e1f-126">Vous pouvez choisir entre une option basée sur une ressource et une option basée sur un abonnement pour l’authentification.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-126">You can choose between using a resource-based option and a subscription-based option for authentication.</span></span> <span data-ttu-id="c6e1f-127">Pour plus d’informations, consultez [Connecter les informations sur l’audience à un compte Azure Data Lake Storage Gen2 avec un principal de service Azure](connect-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="c6e1f-127">For more information, see [Connect audience insights to an Azure Data Lake Storage Gen2 account with an Azure service principal](connect-service-principal.md).</span></span> <span data-ttu-id="c6e1f-128">Entrez les informations du **Conteneur** et sélectionnez **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-128">Enter the **Container** information and select **Next**.</span></span>
   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="c6e1f-129">![Boîte de dialogue pour entrer de nouveaux détails de connexion pour Azure Data Lake](media/enter-new-storage-details.png)
   > </span><span class="sxs-lookup"><span data-stu-id="c6e1f-129">![Dialog box to enter new connection details for Azure Data Lake](media/enter-new-storage-details.png)
   > </span></span>[!NOTE]
<span data-ttu-id="c6e1f-130">Vous avez besoin de l’un des rôles suivants pour le conteneur ou le compte de stockage mentionné ci-dessus pour pouvoir vous connecter et créer une source de données :</span><span class="sxs-lookup"><span data-stu-id="c6e1f-130">You need one of the following roles either to the container or the storage account referred above to be able to connect to and create a data source:</span></span>
   >  - <span data-ttu-id="c6e1f-131">Lecteur de données d’objets BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="c6e1f-131">Storage Blob Data Reader</span></span>
   >  - <span data-ttu-id="c6e1f-132">Propriétaire de données d’objets BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="c6e1f-132">Storage Blob Data Owner</span></span>
   >  - <span data-ttu-id="c6e1f-133">Contributeur de données BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="c6e1f-133">Storage Blob Data Contributor</span></span>

1. <span data-ttu-id="c6e1f-134">Dans la boîte de dialogue **Sélectionner un dossier Common Data Model**, sélectionnez le fichier model.json ou manifest.json à partir duquel importer les données, puis sélectionnez **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-134">In the **Select a Common Data Model folder** dialog, select the model.json or manifest.json file to import data from, and select **Next**.</span></span>
   > [!NOTE]
   > <span data-ttu-id="c6e1f-135">Tout fichier model.json ou manifest.json associé à une autre source de données dans l’environnement n’apparaîtra pas dans la liste.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-135">Any model.json or manifest.json file associated with another data source in the environment won't show in the list.</span></span>

1. <span data-ttu-id="c6e1f-136">Vous obtiendrez une liste des entités disponibles dans le fichier model.json ou manifest.json sélectionné.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-136">You'll get a list of available entities in the selected model.json or manifest.json file.</span></span> <span data-ttu-id="c6e1f-137">Vous pouvez vérifier et sélectionner à partir de la liste des entités disponibles et sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-137">You can review and select from the list of available entities and select **Save**.</span></span> <span data-ttu-id="c6e1f-138">Toutes les entités sélectionnées seront ingérées à partir de la nouvelle source de données.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-138">All of the selected entities will be ingested from the new data source.</span></span>
   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="c6e1f-139">![Boîte de dialogue affichant une liste d’entités à partir d’un fichier model.json](media/review-entities.png)</span><span class="sxs-lookup"><span data-stu-id="c6e1f-139">![Dialog box showing a list of entities from a model.json file](media/review-entities.png)</span></span>

8. <span data-ttu-id="c6e1f-140">Indiquez pour quelles entités de données vous souhaitez activer le profilage des données, puis sélectionnez **Enregistrer**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-140">Indicate which data entities you want to enable data profiling and select **Save**.</span></span> <span data-ttu-id="c6e1f-141">Le profilage des données permet l’analyse et d’autres fonctionnalités.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-141">Data profiling enables analytics and other capabilities.</span></span> <span data-ttu-id="c6e1f-142">Vous pouvez sélectionner toute l’entité, ce qui entraîne la sélection de tous les attributs de l’entité, ou sélectionner certains attributs de votre choix.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-142">You can select the whole entity, which selects all attributes from the entity, or select certain attributes of your choice.</span></span> <span data-ttu-id="c6e1f-143">Par défaut, aucune entité n’est activée pour le profilage des données.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-143">By default, no entity is enabled for data profiling.</span></span>
   > [!div class="mx-imgBorder"]
   > <span data-ttu-id="c6e1f-144">![Boîte de dialogue illustrant un profilage des données](media/dataprofiling-entities.png)</span><span class="sxs-lookup"><span data-stu-id="c6e1f-144">![Dialog box showing a data profiling](media/dataprofiling-entities.png)</span></span>

9. <span data-ttu-id="c6e1f-145">Après avoir enregistré vos sélections, la page **Source d’informations** s’ouvre.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-145">After saving your selections, the **Data sources** page opens.</span></span> <span data-ttu-id="c6e1f-146">Vous devriez maintenant voir la connexion au dossier Common Data Model en tant que source de données.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-146">You should now see the Common Data Model folder connection as a data source.</span></span>

> [!NOTE]
> <span data-ttu-id="c6e1f-147">Un fichier model.json ou manifest.json ne peut être associé qu’à une seule source de données dans le même environnement.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-147">A model.json file or manifest.json can only associate with one data source in the same environment.</span></span> <span data-ttu-id="c6e1f-148">Cependant, le même fichier model.json ou manifest.json peut être utilisé pour les sources de données dans plusieurs environnements.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-148">However, the same model.json or manifest.json file can be used for data sources in multiple environments.</span></span>

## <a name="edit-a-common-data-model-folder-data-source"></a><span data-ttu-id="c6e1f-149">Modifier une source de données de dossier Common Data Model</span><span class="sxs-lookup"><span data-stu-id="c6e1f-149">Edit a Common Data Model folder data source</span></span>

<span data-ttu-id="c6e1f-150">Vous pouvez mettre à jour la clé d’accès du compte de stockage contenant le dossier Common Data Model.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-150">You can update the access key for the storage account containing the Common Data Model folder.</span></span> <span data-ttu-id="c6e1f-151">Vous pouvez également modifier le fichier model.json ou manifest.json.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-151">You may also change the model.json or manifest.json file.</span></span> <span data-ttu-id="c6e1f-152">Pour vous connecter à un autre conteneur à partir de votre compte de stockage ou modifier le nom du compte, [créer une connexion de source de données](#connect-to-a-common-data-model-folder).</span><span class="sxs-lookup"><span data-stu-id="c6e1f-152">To connect to a different container from your storage account, or change the account name, [create a new data source connection](#connect-to-a-common-data-model-folder).</span></span>

1. <span data-ttu-id="c6e1f-153">Dans les informations sur l’audience, accédez à **Données** > **Sources de données**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-153">In audience insights, go to **Data** > **Data sources**.</span></span>

2. <span data-ttu-id="c6e1f-154">En regard de la source de données que vous souhaitez mettre à jour, sélectionnez les points de suspension.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-154">Next to the data source you'd like to update, select the ellipsis.</span></span>

3. <span data-ttu-id="c6e1f-155">Sélectionnez l’option **Modifier** dans la liste.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-155">Select the **Edit** option from the list.</span></span>

4. <span data-ttu-id="c6e1f-156">Éventuellement, mettez à jour la **Clé d’accès** et sélectionnez **Suivant**.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-156">Optionally, update the **Access key** and select **Next**.</span></span>

   ![Boîte de dialogue permettant de modifier et mettre à jour une clé d’accès pour une source de données existante](media/edit-access-key.png)

5. <span data-ttu-id="c6e1f-158">Vous pouvez éventuellement mettre à jour une connexion de clé de compte vers une connexion basée sur une ressource ou un abonnement.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-158">Optionally, you can update from an account key connection to a resource-based or a subscription-based connection.</span></span> <span data-ttu-id="c6e1f-159">Pour plus d’informations, consultez [Connecter les informations sur l’audience à un compte Azure Data Lake Storage Gen2 avec un principal de service Azure](connect-service-principal.md).</span><span class="sxs-lookup"><span data-stu-id="c6e1f-159">For more information, see [Connect audience insights to an Azure Data Lake Storage Gen2 account with an Azure service principal](connect-service-principal.md).</span></span> <span data-ttu-id="c6e1f-160">Vous ne pouvez pas modifier les informations du **Conteneur** lors de la mise à jour de la connexion.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-160">You can't change **Container** information when updating the connection.</span></span>
   > [!div class="mx-imgBorder"]

   > ![Boîte de dialogue pour entrer les détails de connexion d’Azure Data Lake à un compte de stockage existant](media/enter-existing-storage-details.png)

   > [!NOTE]
   > <span data-ttu-id="c6e1f-162">Vous avez besoin de l’un des rôles suivants pour le conteneur ou le compte de stockage mentionné ci-dessus pour pouvoir vous connecter et créer une source de données :</span><span class="sxs-lookup"><span data-stu-id="c6e1f-162">You need one of the following roles either to the container or the storage account referred above to be able to connect to and create a data source:</span></span>
   >  - <span data-ttu-id="c6e1f-163">Lecteur de données d’objets BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="c6e1f-163">Storage Blob Data Reader</span></span>
   >  - <span data-ttu-id="c6e1f-164">Propriétaire de données d’objets BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="c6e1f-164">Storage Blob Data Owner</span></span>
   >  - <span data-ttu-id="c6e1f-165">Contributeur de données BLOB de stockage</span><span class="sxs-lookup"><span data-stu-id="c6e1f-165">Storage Blob Data Contributo</span></span>


6. <span data-ttu-id="c6e1f-166">Vous pouvez également choisir un fichier model.json ou manifest.json différent avec un ensemble d’entités différent du conteneur.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-166">Optionally, choose a different model.json or manifest.json file with a different set of entities from the container.</span></span>

7. <span data-ttu-id="c6e1f-167">Vous pouvez éventuellement sélectionner des entités supplémentaires à ingérer.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-167">Optionally, you can select additional entities to ingest.</span></span> <span data-ttu-id="c6e1f-168">Vous pouvez également supprimer toutes les entités déjà sélectionnées s’il n’y a pas de dépendances.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-168">You can also remove any already selected entities if there are no dependencies.</span></span>

   > [!IMPORTANT]
   > <span data-ttu-id="c6e1f-169">S’il existe des dépendances sur le fichier model.json ou manifest.json existant et sur l’ensemble d’entités, vous verrez un message d’erreur et vous ne pourrez pas sélectionner un autre fichier model.json ou manifest.json.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-169">If there are dependencies on the existing model.json or manifest.json file and the set of entities, you'll see an error message and can't select a different model.json or manifest.json file.</span></span> <span data-ttu-id="c6e1f-170">Supprimez ces dépendances avant de modifier le fichier model.json ou manifest.json ou créez une source de données avec le fichier model.json ou manifest.json que vous souhaitez utiliser pour éviter de supprimer les dépendances.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-170">Remove those dependencies before changing the model.json or manifest.json file or create a new data source with the model.json or manifest.json file that you want to use to avoid removing the dependencies.</span></span>

8. <span data-ttu-id="c6e1f-171">Vous pouvez éventuellement sélectionner des attributs ou entités supplémentaires pour activer le profilage des données, ou désactiver ceux déjà sélectionnés.</span><span class="sxs-lookup"><span data-stu-id="c6e1f-171">Optionally, you can select additional attributes or entities to enable data profiling on or disable already selected ones.</span></span>   


[!INCLUDE[footer-include](../includes/footer-banner.md)]